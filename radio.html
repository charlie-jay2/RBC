<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RBC Radio - RBC Television</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600&display=swap"
      rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />

    <meta property="og:title" content="RBC Television - Radio 1" />
    <meta property="og:description" content="The non-stop radio" />
    <meta
      property="og:image"
      content="https://rbc-television.netlify.app/assets/Radio1Logo.png" />
    <meta
      property="og:url"
      content="https://rbc-television.netlify.app/radio" />
    <meta property="og:type" content="website" />
  </head>
  <body>
    <nav>
      <div class="hamburger" id="hamburger">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
      </div>
      <a href="index.html"
        ><img src="./assets/RBCWhite.png" alt="RBC Logo" class="nav-img"
      /></a>
      <ul id="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="https://discord.gg/rbctv" target="blank">Contact</a></li>
        <li><a href="our-team.html">Our Team</a></li>
        <li><a href="blogs.html">Blogs</a></li>
        <li><a href="podcasts.html">Podcasts</a></li>

        <li><a href="radio.html">Radio</a></li>
        <li class="dropdown">
          <a href="javascript:void(0)" class="dropbtn">Shows</a>
          <div class="dropdown-content">
            <a href="/shows/extras.html">Extras</a>
            <a href="/shows/news24.html">News 24</a>
            <a href="/shows/world-news.html">World News</a>
            <a href="/shows/the-star.html">The Star</a>
          </div>
        </li>
      </ul>
    </nav>

    <section id="radio">
      <h1>Listen to RBC Radio</h1>

      <!-- Station Logo -->
      <div id="station-logo">
        <img
          id="radio1-logo"
          src="/assets/Radio1Logo.png"
          alt="Radio 1 Logo"
          style="display: block" />
      </div>

      <!-- Station Selector -->
      <select id="station-selector">
        <option value="radio1" selected>RBC Radio 1</option>
      </select>

      <!-- Play Button -->
      <div class="player-container">
        <button id="play-button">Play</button>
      </div>

      <!-- Song Info -->
      <div id="song-info">
        <p>
          <strong>Now Playing:</strong> <span id="song-title">Unknown</span> by
          <span id="artist-name">Unknown Artist</span>
        </p>
      </div>

      <!-- Song Artwork -->
      <div id="song-artwork">
        <img
          id="album-art"
          src=""
          alt="Album Art"
          style="display: none"
          draggable="false" />
      </div>

      <!-- Song History Table -->
      <div id="song-history">
        <h2>Recently Played Songs</h2>
        <table>
          <tbody id="history-table">
            <!-- Song history rows will be added here dynamically -->
          </tbody>
        </table>
      </div>

      <!-- Audio Player -->
      <audio id="audio-player" controls style="display: none"></audio>
    </section>

    <iframe
      src="https://azura.typicalmedia.net/public/rbcradio1/schedule/embed?theme=dark"
      frameborder="0"
      allowtransparency="true"
      style="width: 90%; min-height: 800px; border: 0"></iframe>

    <footer>
      <p>&copy; 2024 RBC Television. All rights reserved.</p>
    </footer>

    <style>
      body {
        font-family: "Raleway", sans-serif;
        background-color: #1e1e2e;
        color: #ffffff;
        text-align: center;
        margin: 0;
        padding: 0;
      }

      /* Hamburger Menu Styles */
      .hamburger {
        display: none; /* Hidden by default */
        cursor: pointer; /* Pointer cursor on hover */
        flex-direction: column; /* Arrange items vertically */
        padding: 10px; /* Padding for the hamburger */
      }

      .bar {
        height: 3px; /* Height of the bars */
        width: 30px; /* Width of the bars */
        background-color: white; /* Bar color */
        margin: 3px 0; /* Margin between bars */
        transition: 0.4s; /* Transition effect */
      }

      /* Navigation styles */
      nav {
        display: flex; /* Flex layout for nav */
        justify-content: space-between; /* Space out nav items */
        align-items: center; /* Center items vertically */
        padding: 10px; /* Padding around the nav */
      }

      nav ul {
        list-style: none; /* Remove default list style */
        display: flex; /* Flex display for the nav items */
        margin: 0; /* No margin */
        padding: 0; /* No padding */
      }

      nav ul li {
        margin: 0 15px; /* Margin between nav items */
      }

      nav a {
        text-decoration: none; /* No underline for links */
        color: white; /* Link color */
      }

      /* Responsive Styles */
      @media (max-width: 768px) {
        .hamburger {
          display: flex; /* Show hamburger icon on mobile */
        }

        nav ul {
          display: none; /* Hide nav items by default on mobile */
          flex-direction: column; /* Stack nav items vertically */
          position: absolute; /* Position absolutely */
          background-color: #333; /* Background color for the menu */
          top: 60px; /* Position below the navbar */
          left: 0; /* Align to the left */
          width: 100%; /* Full width */
          z-index: 999; /* Ensure it's above other content */
        }

        nav ul.show {
          display: flex; /* Show nav items when toggled */
        }

        nav ul li {
          margin: 10px 0; /* Vertical margin between items */
          text-align: center; /* Center align text */
        }
      }

      h1 {
        color: #b06cfc;
        margin-top: 50px;
      }

      #station-logo {
        margin: 20px auto;
      }

      #station-selector {
        margin: 20px;
        padding: 10px;
        font-size: 16px;
        background-color: #2e2e3f;
        color: #ffffff;
        border: none;
        border-radius: 5px;
      }

      .player-container {
        margin-top: 20px;
      }

      #play-button {
        padding: 15px 40px;
        background-color: #b06cfc;
        border: none;
        border-radius: 8px;
        color: #ffffff;
        font-size: 18px;
        cursor: pointer;
        transition: transform 0.2s ease-in-out,
          background-color 0.3s ease-in-out;
      }

      #play-button:hover {
        transform: scale(1.1);
      }

      #song-info,
      #song-history {
        margin-top: 20px;
      }

      #song-history table {
        margin: 0 auto;
        color: #ffffff;
        font-size: 16px;
        border-collapse: collapse; /* Ensure borders are collapsed */
      }

      #song-history table tr {
        border-bottom: 1px solid white; /* Add a white line between rows */
      }

      #song-history table tr:last-child {
        border-bottom: none; /* Remove the border from the last row */
      }

      #song-history table tr td {
        padding: 10px;
      }

      #album-art {
        width: 250px;
        height: 250px;
        border-radius: 8px;
        display: block;
        margin: 0 auto;
      }

      footer {
        text-align: center;
        margin-top: 50px;
      }
    </style>

    <script>
      const playButton = document.getElementById("play-button");
      const audioPlayer = document.getElementById("audio-player");
      const songTitle = document.getElementById("song-title");
      const artistName = document.getElementById("artist-name");
      const albumArt = document.getElementById("album-art");
      const historyTable = document.getElementById("history-table");

      const stations = {
        radio1: "https://play.adtonos.com/rbc-radio-1",
      };

      const placeholderImage = "./assets/Radio1Back.png";

      async function fetchSongInfo() {
        try {
          const response = await fetch(
            "https://api.typicalmedia.net/api/v1/radioStats?station=26&history=10"
          );
          const data = await response.json();

          if (data && data.current_song) {
            updateSongInfo(data.current_song);
            updateHistory(data.history);
          } else {
            console.warn("No song data available");
          }
        } catch (error) {
          console.error("Error fetching song info:", error);
        }
      }

      function updateSongInfo(song) {
        songTitle.textContent = song.title || "Unknown";
        artistName.textContent = song.artist || "Unknown";
        albumArt.src = song.art || placeholderImage;
        albumArt.style.display = "block";
      }

      function updateHistory(history) {
        historyTable.innerHTML = ""; // Clear previous history
        history.forEach((song) => {
          const newRow = document.createElement("tr");
          newRow.innerHTML = `
            <td>${song.title || "Unknown"} | ${
            song.artist || "Unknown Artist"
          } | 
            <img src="${
              song.art || placeholderImage
            }" alt="Art" style="width: 50px; height: 50px; vertical-align: middle;" />
            </td>`;
          historyTable.appendChild(newRow);
        });
      }

      playButton.addEventListener("click", () => {
        if (audioPlayer.paused) {
          audioPlayer.src = stations.radio1;
          audioPlayer.play();
          playButton.textContent = "Pause";
        } else {
          audioPlayer.pause();
          playButton.textContent = "Play";
        }
      });

      fetchSongInfo();
      setInterval(fetchSongInfo, 20000);

      // Hamburger Menu Toggle
      const hamburger = document.getElementById("hamburger");
      const navLinks = document.getElementById("nav-links");
      const notibar = document.getElementById("notibar");

      hamburger.addEventListener("click", () => {
        navLinks.classList.toggle("show"); // Toggle the 'show' class on the nav links

        // Toggle Notibar visibility
        if (navLinks.classList.contains("show")) {
          notibar.style.display = "none"; // Hide notibar when menu is open
        } else {
          notibar.style.display = "block"; // Show notibar when menu is closed
        }
      });
    </script>
  </body>
</html>
